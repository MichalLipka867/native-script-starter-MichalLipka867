<ActionBar title="Lista Produktów" class="action-bar">
  <ActionItem (tap)="navigateToSettings()" ios.position="right" android.position="actionBar">
    <Label text="⚙️" fontSize="18"></Label>
  </ActionItem>
</ActionBar>

<ScrollView>
  <StackLayout class="page">
    <StackLayout *ngIf="isLoading" class="loading-container">
      <ActivityIndicator busy="true"></ActivityIndicator>
      <Label text="Ładowanie produktów..." class="loading-text"></Label>
    </StackLayout>

    <StackLayout *ngIf="error && !isLoading" class="error-container">
      <Label [text]="error" class="error-text"></Label>
      <Button text="Spróbuj ponownie" (tap)="loadProducts()" class="btn btn-primary"></Button>
    </StackLayout>

    <StackLayout *ngIf="!isLoading && !error">
      <StackLayout *ngFor="let product of products" class="product-item" (tap)="navigateToDetail(product.id!)">
        <GridLayout columns="*, auto" rows="auto, auto, auto">
          <StackLayout col="0" row="0">
            <Label [text]="product.name" class="product-name"></Label>
            <Label [text]="'Kod: ' + product.code" class="product-code"></Label>
          </StackLayout>
          <StackLayout col="1" row="0" horizontalAlignment="right">
            <Label [text]="getStatusText(product.status)" 
                   [backgroundColor]="getStatusColor(product.status)" 
                   class="status-badge"></Label>
          </StackLayout>
        </GridLayout>
      </StackLayout>

      <Label *ngIf="products.length === 0" text="Brak produktów" class="empty-text"></Label>
    </StackLayout>

    <Button text="+ Dodaj produkt" (tap)="navigateToAdd()" class="btn btn-primary add-button"></Button>
  </StackLayout>
</ScrollView>
